# CesiumDemo

CesiumDemo 提供了一个基于 CesiumJS 的 3D 立方体建模体验，覆盖从对象创建、选取到 G/R/S 变换的核心交互。项目直接通过静态资源运行，无需额外构建步骤。

## 快速开始

1. 安装任意静态服务器（可选）：
   ```bash
   npm install -g serve
   ```
2. 在仓库根目录启动服务器：
   ```bash
   serve .
   ```
3. 访问提示的地址（通常是 `http://localhost:3000/index.html`）。

也可以使用其他静态服务器工具（如 `npx http-server`、`python -m http.server` 等）托管根目录。

## 主要功能

- **Add → Mesh → Cube 图形菜单**：悬停高亮、点击即可在视图中心生成立方体。
- **快捷键序列**：`Shift + A` 打开添加菜单，随后按 `M` → `C` 可直接创建立方体。
- **立方体即时参数面板**：创建后自动弹出，可实时调整尺寸、位置。
- **对象选取与高亮**：点击立方体即选中，显示橙色轮廓与三轴 Gizmo。
- **变换操纵器与快捷键**：
  - `G`：进入移动模式，支持 `X/Y/Z` 轴约束、`Shift` 微调、`Ctrl` 网格吸附。
  - `Shift + X/Y/Z`：移动时锁定到排除当前轴的平面（依次为 `YZ`、`XZ`、`XY`），再次按下可在全局 / 本地坐标系间切换。
  - `R`：进入旋转模式，`Ctrl` 提供 5° 增量并吸附常用角度，视口展示旋转弧线与角度读数。
  - `S`：进入缩放模式，支持轴向非均匀缩放、按 `Shift` 保持细粒度调整、按住 `Alt` 锁定比例。
  - 操作时支持直接输入数值并回车确认，实现精确控制。
- **N 面板**：按 `N` 显示 / 隐藏右侧 Transform 面板，支持位置、旋转、缩放精确输入。
- **对象属性编辑器**：右侧“对象属性”面板提供主色、不透明度、描边与自定义标签等材质设置，并实时回写到场景。
- **对象 / 编辑模式切换**：按 `Tab` 切换对象模式与编辑模式，编辑模式下可用 `1 / 2 / 3` 选择顶点、边、面，并直接在场景中点击辅助标记定位组件。
- **衰减编辑（Proportional Editing）**：在编辑模式按 `O` 启用衰减编辑，滚轮调整影响半径，半透明球体展示影响范围，可对组件进行柔和拉伸。
- **修改器堆栈**：属性面板新增修改器列表，支持添加细分、倒角、实体化等常用修改器并调节顺序、启用状态与参数。
- **X-Ray 透视与选择过滤工具**：顶部工具条可启用透视模式快速透视遮挡物体，并通过下拉菜单限制可选对象类型。
- **轴向反馈**：Gizmo 颜色与线宽实时反映当前轴向约束与坐标系（全局 / 本地）。
- **状态事件派发**：通过 `onStateChange` / `offStateChange` 订阅模式、选中、轴向与变换阶段事件，便于后续扩展。
- **视图协同导航**：在变换过程中仍可中键旋转或 Alt + 中键平移视图，确保操作与观察互不干扰。

## 键位速查

- `Shift + A`：打开添加菜单
- `M` → `C`：在菜单开启状态下快速创建立方体
- `G / R / S`：进入移动 / 旋转 / 缩放模式
- `X / Y / Z`：切换轴向约束（同轴重复按切换全局 / 本地）
- `Shift + X / Y / Z`：启用排除当前轴的平面约束（依次为 `YZ`、`XZ`、`XY`），再次按下可切换全局 / 本地
- `Shift`：微调（移动 / 缩放）
- `Ctrl`：移动吸附 / 旋转角度捕捉 / 缩放取整
- `Alt`：缩放时保持各轴比例
- `N`：切换 Transform 面板
- `Esc`：取消当前操作 / 关闭菜单

## 项目结构

```
├── index.html          # 页面结构与 UI 容器
├── src
│   ├── main.js         # 交互逻辑、状态机与 Cesium 集成
│   └── styles.css      # 全局样式与面板、菜单样式
├── docs                # 需求文档与 To-Do 列表
└── 产品需求文档.md
```

## 参考资料

- [CesiumJS 官方文档](https://cesium.com/learn/cesiumjs/ref-doc/)
- 《产品需求文档.md》：交互设计背景与细节
- `docs/创建立方体功能ToDo.md`：开发拆解清单
